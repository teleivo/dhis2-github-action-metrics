{"id":1952058108,"name":"Run api tests","node_id":"WFR_kwLOA_1uaM50Wgr8","head_branch":"DHIS2-12623-2.38","head_sha":"f0befec3ddb1f0cb484c19ba7a30a80aef7a5598","run_number":5913,"event":"pull_request","status":"completed","conclusion":"cancelled","workflow_id":5591308,"check_suite_id":5578967655,"check_suite_node_id":"CS_kwDOA_1uaM8AAAABTIhKZw","url":"https://api.github.com/repos/dhis2/dhis2-core/actions/runs/1952058108","html_url":"https://github.com/dhis2/dhis2-core/actions/runs/1952058108","pull_requests":[],"created_at":"2022-03-08T14:49:17Z","updated_at":"2022-03-08T14:52:30Z","actor":{"login":"teleivo","id":4661144,"node_id":"MDQ6VXNlcjQ2NjExNDQ=","avatar_url":"https://avatars.githubusercontent.com/u/4661144?v=4","gravatar_id":"","url":"https://api.github.com/users/teleivo","html_url":"https://github.com/teleivo","followers_url":"https://api.github.com/users/teleivo/followers","following_url":"https://api.github.com/users/teleivo/following{/other_user}","gists_url":"https://api.github.com/users/teleivo/gists{/gist_id}","starred_url":"https://api.github.com/users/teleivo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/teleivo/subscriptions","organizations_url":"https://api.github.com/users/teleivo/orgs","repos_url":"https://api.github.com/users/teleivo/repos","events_url":"https://api.github.com/users/teleivo/events{/privacy}","received_events_url":"https://api.github.com/users/teleivo/received_events","type":"User","site_admin":false},"run_attempt":1,"run_started_at":"2022-03-08T14:49:17Z","triggering_actor":{"login":"teleivo","id":4661144,"node_id":"MDQ6VXNlcjQ2NjExNDQ=","avatar_url":"https://avatars.githubusercontent.com/u/4661144?v=4","gravatar_id":"","url":"https://api.github.com/users/teleivo","html_url":"https://github.com/teleivo","followers_url":"https://api.github.com/users/teleivo/followers","following_url":"https://api.github.com/users/teleivo/following{/other_user}","gists_url":"https://api.github.com/users/teleivo/gists{/gist_id}","starred_url":"https://api.github.com/users/teleivo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/teleivo/subscriptions","organizations_url":"https://api.github.com/users/teleivo/orgs","repos_url":"https://api.github.com/users/teleivo/repos","events_url":"https://api.github.com/users/teleivo/events{/privacy}","received_events_url":"https://api.github.com/users/teleivo/received_events","type":"User","site_admin":false},"jobs_url":"https://api.github.com/repos/dhis2/dhis2-core/actions/runs/1952058108/jobs","logs_url":"https://api.github.com/repos/dhis2/dhis2-core/actions/runs/1952058108/logs","check_suite_url":"https://api.github.com/repos/dhis2/dhis2-core/check-suites/5578967655","artifacts_url":"https://api.github.com/repos/dhis2/dhis2-core/actions/runs/1952058108/artifacts","cancel_url":"https://api.github.com/repos/dhis2/dhis2-core/actions/runs/1952058108/cancel","rerun_url":"https://api.github.com/repos/dhis2/dhis2-core/actions/runs/1952058108/rerun","previous_attempt_url":null,"workflow_url":"https://api.github.com/repos/dhis2/dhis2-core/actions/workflows/5591308","head_commit":{"id":"f0befec3ddb1f0cb484c19ba7a30a80aef7a5598","tree_id":"bbc4cf21c7e218ced02862a1c583354e123c1b5c","message":"chore: move DB access and mutation to preheat and preprocessor DHIS2-12623 (#9904)\n\n* test: adds a test for event import with non default cat combo\r\n\r\n* fix: metadata file\r\n\r\n* fix: CategoryOptionCombo.categoryOptions are lazy when from DB DHIS2-12460\r\n\r\n* test: add missing category option combo\r\n\r\n* fix: add event.aoc to preheat if not provided in payload\r\n\r\n* fix: set event.attributeOptionCombo if not provided\r\n\r\n* fix: MissingCategoryOptionComboSupplier did not run\r\n\r\n* chore: move setting event.aoc into preprocessor\r\n\r\n* chore: remove unused\r\n\r\n* chore: add some tests and todos\r\n\r\n* wip: do not try to fetch AOC if a CO does not exist\r\n\r\n* chore: use CategoryCombo instead of Program\r\n\r\n* chore: make client code easier\r\n\r\n* chore: add to preheat.map using identifier as well\r\n\r\n* chore: remove unnecessary stubbings from EventProgramPreProcessorTest\r\n\r\n* chore: test preprocessor\r\n\r\n* chore: trim validation hook\r\n\r\n* wip: handle default cc in eventcategoryoptvalidationhook\r\n\r\n* test: EventImportValidationTest metadata setup wrong\r\n\r\nAOC was added to the default category combo but had a non-default\r\ncategory option\r\n\r\nCreate a new program with new non-default category combo with one\r\ncategory and the specific AOC.\r\n\r\n* wip: fix integration test metadata\r\n\r\n* chore: resolve program via programstage\r\n\r\n* chore: fix ReportSummaryDeleteIntegrationTest test\r\n\r\n* chore: switch stringutils\r\n\r\n* chore: who added the <p> :)\r\n\r\n* chore: fix EventCategoryOptValidationHookTest\r\n\r\n* chore: move usernameExists to only hook using it\r\n\r\n* chore: move programStageHasEvents to only hook using it\r\n\r\n* chore: only remove DB fetching from PreCheckDataRelationsValidationHook\r\n\r\n* chore: only remove DB fetching from PreCheckDataRelationsValidationHook\r\n\r\n* chore: checking if cos match aoc needs to be checked after aoc and event program are checked\r\n\r\notherwise I am using an invalid AOC as a proxy\r\n\r\n* chore: simplify validation\r\n\r\n* test: fix e2e metadata\r\n\r\n* chore: remove unused\r\n\r\n* chore: remove\r\n\r\n* chore: remove\r\n\r\n* chore: remove\r\n\r\n* chore: remove\r\n\r\n* chore: remove\r\n\r\n* chore: remove\r\n\r\n* chore: remove\r\n\r\n* chore: remove\r\n\r\n* chore: remove\r\n\r\n* chore: remove\r\n\r\n* chore: remove TrackerImportValidationContext\r\n\r\n* test: adds a test for event import with non default cat combo\r\n\r\n* fix: metadata file\r\n\r\n* fix: e2e metadata\r\n\r\n* fix: metadata\r\n\r\n* test: set metadata.json to commit 7067be60efa06c88abb749f8becdd7219695bcd7\r\n\r\n* test: remove duplicate properties on categoryOption\r\n\r\n* test: move successful scenario to another file\r\n\r\n* fix: test name\r\n\r\n* fix: sonarlint\r\n\r\n* chore: remove todo\r\n\r\n* chore: allow checking for containment of AOC\r\n\r\n* chore: do not try fetching AOC again for combination which does not yield a result\r\n\r\n* chore: handle payloads with subset of category options\r\n\r\n* chore: test getting aoc is order independent\r\n\r\n* chore: store only a mapping of identifiers\r\n\r\n* chore: rearrange\r\n\r\n* chore: javadocs and clean tests\r\n\r\n* chore: javadoc\r\n\r\n* chore: remove comment\r\n\r\n* fix: formatting\r\n\r\nCo-authored-by: Gintare Vilkelyte <vilkelyte.gintare@gmail.com>","timestamp":"2022-03-08T14:48:22Z","author":{"name":"teleivo","email":"teleivo@users.noreply.github.com"},"committer":{"name":"teleivo","email":"teleivo@users.noreply.github.com"}},"repository":{"id":66940520,"node_id":"MDEwOlJlcG9zaXRvcnk2Njk0MDUyMA==","name":"dhis2-core","full_name":"dhis2/dhis2-core","private":false,"owner":{"login":"dhis2","id":1089987,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEwODk5ODc=","avatar_url":"https://avatars.githubusercontent.com/u/1089987?v=4","gravatar_id":"","url":"https://api.github.com/users/dhis2","html_url":"https://github.com/dhis2","followers_url":"https://api.github.com/users/dhis2/followers","following_url":"https://api.github.com/users/dhis2/following{/other_user}","gists_url":"https://api.github.com/users/dhis2/gists{/gist_id}","starred_url":"https://api.github.com/users/dhis2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhis2/subscriptions","organizations_url":"https://api.github.com/users/dhis2/orgs","repos_url":"https://api.github.com/users/dhis2/repos","events_url":"https://api.github.com/users/dhis2/events{/privacy}","received_events_url":"https://api.github.com/users/dhis2/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/dhis2/dhis2-core","description":"DHIS2 Core. Written in Java. Contains the service layer and Web API.","fork":false,"url":"https://api.github.com/repos/dhis2/dhis2-core","forks_url":"https://api.github.com/repos/dhis2/dhis2-core/forks","keys_url":"https://api.github.com/repos/dhis2/dhis2-core/keys{/key_id}","collaborators_url":"https://api.github.com/repos/dhis2/dhis2-core/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/dhis2/dhis2-core/teams","hooks_url":"https://api.github.com/repos/dhis2/dhis2-core/hooks","issue_events_url":"https://api.github.com/repos/dhis2/dhis2-core/issues/events{/number}","events_url":"https://api.github.com/repos/dhis2/dhis2-core/events","assignees_url":"https://api.github.com/repos/dhis2/dhis2-core/assignees{/user}","branches_url":"https://api.github.com/repos/dhis2/dhis2-core/branches{/branch}","tags_url":"https://api.github.com/repos/dhis2/dhis2-core/tags","blobs_url":"https://api.github.com/repos/dhis2/dhis2-core/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/dhis2/dhis2-core/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/dhis2/dhis2-core/git/refs{/sha}","trees_url":"https://api.github.com/repos/dhis2/dhis2-core/git/trees{/sha}","statuses_url":"https://api.github.com/repos/dhis2/dhis2-core/statuses/{sha}","languages_url":"https://api.github.com/repos/dhis2/dhis2-core/languages","stargazers_url":"https://api.github.com/repos/dhis2/dhis2-core/stargazers","contributors_url":"https://api.github.com/repos/dhis2/dhis2-core/contributors","subscribers_url":"https://api.github.com/repos/dhis2/dhis2-core/subscribers","subscription_url":"https://api.github.com/repos/dhis2/dhis2-core/subscription","commits_url":"https://api.github.com/repos/dhis2/dhis2-core/commits{/sha}","git_commits_url":"https://api.github.com/repos/dhis2/dhis2-core/git/commits{/sha}","comments_url":"https://api.github.com/repos/dhis2/dhis2-core/comments{/number}","issue_comment_url":"https://api.github.com/repos/dhis2/dhis2-core/issues/comments{/number}","contents_url":"https://api.github.com/repos/dhis2/dhis2-core/contents/{+path}","compare_url":"https://api.github.com/repos/dhis2/dhis2-core/compare/{base}...{head}","merges_url":"https://api.github.com/repos/dhis2/dhis2-core/merges","archive_url":"https://api.github.com/repos/dhis2/dhis2-core/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/dhis2/dhis2-core/downloads","issues_url":"https://api.github.com/repos/dhis2/dhis2-core/issues{/number}","pulls_url":"https://api.github.com/repos/dhis2/dhis2-core/pulls{/number}","milestones_url":"https://api.github.com/repos/dhis2/dhis2-core/milestones{/number}","notifications_url":"https://api.github.com/repos/dhis2/dhis2-core/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/dhis2/dhis2-core/labels{/name}","releases_url":"https://api.github.com/repos/dhis2/dhis2-core/releases{/id}","deployments_url":"https://api.github.com/repos/dhis2/dhis2-core/deployments"},"head_repository":{"id":66940520,"node_id":"MDEwOlJlcG9zaXRvcnk2Njk0MDUyMA==","name":"dhis2-core","full_name":"dhis2/dhis2-core","private":false,"owner":{"login":"dhis2","id":1089987,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEwODk5ODc=","avatar_url":"https://avatars.githubusercontent.com/u/1089987?v=4","gravatar_id":"","url":"https://api.github.com/users/dhis2","html_url":"https://github.com/dhis2","followers_url":"https://api.github.com/users/dhis2/followers","following_url":"https://api.github.com/users/dhis2/following{/other_user}","gists_url":"https://api.github.com/users/dhis2/gists{/gist_id}","starred_url":"https://api.github.com/users/dhis2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhis2/subscriptions","organizations_url":"https://api.github.com/users/dhis2/orgs","repos_url":"https://api.github.com/users/dhis2/repos","events_url":"https://api.github.com/users/dhis2/events{/privacy}","received_events_url":"https://api.github.com/users/dhis2/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/dhis2/dhis2-core","description":"DHIS2 Core. Written in Java. Contains the service layer and Web API.","fork":false,"url":"https://api.github.com/repos/dhis2/dhis2-core","forks_url":"https://api.github.com/repos/dhis2/dhis2-core/forks","keys_url":"https://api.github.com/repos/dhis2/dhis2-core/keys{/key_id}","collaborators_url":"https://api.github.com/repos/dhis2/dhis2-core/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/dhis2/dhis2-core/teams","hooks_url":"https://api.github.com/repos/dhis2/dhis2-core/hooks","issue_events_url":"https://api.github.com/repos/dhis2/dhis2-core/issues/events{/number}","events_url":"https://api.github.com/repos/dhis2/dhis2-core/events","assignees_url":"https://api.github.com/repos/dhis2/dhis2-core/assignees{/user}","branches_url":"https://api.github.com/repos/dhis2/dhis2-core/branches{/branch}","tags_url":"https://api.github.com/repos/dhis2/dhis2-core/tags","blobs_url":"https://api.github.com/repos/dhis2/dhis2-core/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/dhis2/dhis2-core/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/dhis2/dhis2-core/git/refs{/sha}","trees_url":"https://api.github.com/repos/dhis2/dhis2-core/git/trees{/sha}","statuses_url":"https://api.github.com/repos/dhis2/dhis2-core/statuses/{sha}","languages_url":"https://api.github.com/repos/dhis2/dhis2-core/languages","stargazers_url":"https://api.github.com/repos/dhis2/dhis2-core/stargazers","contributors_url":"https://api.github.com/repos/dhis2/dhis2-core/contributors","subscribers_url":"https://api.github.com/repos/dhis2/dhis2-core/subscribers","subscription_url":"https://api.github.com/repos/dhis2/dhis2-core/subscription","commits_url":"https://api.github.com/repos/dhis2/dhis2-core/commits{/sha}","git_commits_url":"https://api.github.com/repos/dhis2/dhis2-core/git/commits{/sha}","comments_url":"https://api.github.com/repos/dhis2/dhis2-core/comments{/number}","issue_comment_url":"https://api.github.com/repos/dhis2/dhis2-core/issues/comments{/number}","contents_url":"https://api.github.com/repos/dhis2/dhis2-core/contents/{+path}","compare_url":"https://api.github.com/repos/dhis2/dhis2-core/compare/{base}...{head}","merges_url":"https://api.github.com/repos/dhis2/dhis2-core/merges","archive_url":"https://api.github.com/repos/dhis2/dhis2-core/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/dhis2/dhis2-core/downloads","issues_url":"https://api.github.com/repos/dhis2/dhis2-core/issues{/number}","pulls_url":"https://api.github.com/repos/dhis2/dhis2-core/pulls{/number}","milestones_url":"https://api.github.com/repos/dhis2/dhis2-core/milestones{/number}","notifications_url":"https://api.github.com/repos/dhis2/dhis2-core/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/dhis2/dhis2-core/labels{/name}","releases_url":"https://api.github.com/repos/dhis2/dhis2-core/releases{/id}","deployments_url":"https://api.github.com/repos/dhis2/dhis2-core/deployments"}}